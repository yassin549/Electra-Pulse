CREATE TABLE [User] (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	Fullname VARCHAR(255) NOT NULL,
	Username VARCHAR(255) UNIQUE NOT NULL,
	Password VARCHAR(255) NOT NULL,
	DateCreated DATETIME NOT NULL DEFAULT GETDATE()
);

CREATE TABLE [UserRole] (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	UserId INT NOT NULL,
	Role INT NOT NULL,
	FOREIGN KEY (UserId) REFERENCES [User](Id)
);

CREATE TABLE AuditLog (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	[Timestamp] DATETIME NOT NULL DEFAULT GETDATE(),
	ActionType INT NOT NULL,
	Description VARCHAR(1023) NOT NULL,
	[Status] INT NOT NULL,
	UserId INT,
	FOREIGN KEY (UserId) REFERENCES [User](Id)
);

CREATE TABLE ProductionLine (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	[Name] VARCHAR(255) NOT NULL,
	Description VARCHAR(1023) NOT NULL
);

CREATE TABLE Workstation (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	ProductionLineId INT NOT NULL,
	[Name] VARCHAR(255) NOT NULL,
	FOREIGN KEY (ProductionLineId) REFERENCES [ProductionLine](Id) 
);

CREATE TABLE Device (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	[Name] VARCHAR(255) NOT NULL,
	Description VARCHAR(1023) NOT NULL,
	Category INT NOT NULL
);

CREATE TABLE Component (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	[Name] VARCHAR(255) NOT NULL,
	Description VARCHAR(1023) NOT NULL,
	Category INT NOT NULL
);

CREATE TABLE Material (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	[Name] VARCHAR(255) NOT NULL,
	Description VARCHAR(1023) NOT NULL
);

CREATE TABLE DeviceTest (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	DeviceId INT NOT NULL,
	Title VARCHAR(255) NOT NULL,
	Performance INT NOT NULL,
	Body VARCHAR(1023) NOT NULL,
	FOREIGN KEY (DeviceID) REFERENCES [Device](Id),
	Timestamp DATETIME NOT NULL DEFAULT GETDATE()
);

CREATE TABLE DeviceDefect (
	Id INT IDENTITY(1,1) PRIMARY KEY,
	DeviceId INT NOT NULL,
	Description VARCHAR(1023) NOT NULL,
	Category INT NOT NULL,
	Timestamp DATETIME NOT NULL DEFAULT GETDATE(),
	FOREIGN KEY (DeviceId) REFERENCES [Device](Id)
);